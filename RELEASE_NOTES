Minimum Profit 5.x Release Notes
================================

4.99.11
-------

 * Syntax highlight definition have changed (again, hopefully for the last
   time). Definitions are now an array of attribute name / regexes in which
   the order is significative.
 * Template insertion works.
 * Tag selection (open the file where a symbol is defined) works.
 * Symbol completion (using tags) works.

4.99.10
-------

 * A big advance in the Curses interface: Alerts, confirmations, and open
   file, save file, search and generic prompts are working. Still lacking
   the selection lists (as the rest of interfaces) and the menu.
 * Improved menus: if an invalid action is added to a menu, it's shown
   followed by a ?; if a key is bound to that action, it's shown between
   square brackets.
 * For systems lacking iconv support (MS Windows), a crappy, ad-hoc utf-8
   converter has been added. This means that hitting 'escape' and typing

	encoding('utf-8');

   makes reading and writing utf-8 encoded files possible on every system.
 * New action 'join_paragraph', to join current paragraph all in one line.
 * New action 'word_wrap_paragraph', that re-word-wraps current paragraph.
   Word wrapping must be set ('mp.config.word_wrap = number;') for this to
   work.

4.99.9
------

 * The GTK and win32 drivers now include a native open/save file dialog.
 * Interactive help (help for the word under the cursor, triggered by
   pressing 'f1') works.
 * The menu in GTK and win32 works.
 * New icon!
 * Some bugs that caused random crashes has been fixed.
 * New action 'exec-doc', that executes the active open document as
   MPSL code.

4.99.8
------

 * New configuration option mp.config.tabs_as_spaces, to store tabs
   as spaces.
 * Each syntax highlight definition can contain an optional function
   called detect() that receives the document as argument and can be used
   to tailor special detection rules.
 * A big part of the internal storage of colors and attributes have
   been rewritten to make it more dynamic.
 * Tag target for the word over the cursor is shown in the status line.
 * Move word left works.
 * Opening an already open file makes it the active one instead of
   re-opening it.
 * The 'execute code' action has been remapped from ctrl-f1 to escape.
 * Spellchecking via ispell works (though it's SLOW!). Activate it by
   hitting escape and typing:

	mp.ispell(1);

 * By default, files are now unlinked before (re)written. File permissions
   and ownership are restored if available. This behaviour can be disabled
   by setting mp.config.unlink to 0.
 * The GTK driver drawing code has been optimized, so it's much more
   responsive now.

4.99.7
------

 * The 'modified' flag of documents is maintained, so now closing files
   with pending modifications ask for confirmation. Also, the %m status
   line directive works (marking modified files with an asterisk).
 * Flex and bison are no longer needed to build.
 * The 'close window' button in GUIs (win32 and GTK) now generate the
   special keycode 'close-window'.
 * The 'exit' action now closes all open documents, asking for saving
   confirmation on those modified.
 * Temporary versions of the 'open' ans 'save' actions (using
   mp.drv.readline() instead of an ad-hoc open file dialog) have
   been implemented.
 * The GUI interfaces now can have their font preferences configured
   by using mp.config.font_face and mp.config.font_size.
 * The actions 'zoom-in' and 'zoom-out' (font size rescaling, bound to
   F11/F12 and ctrl-kp-minus/ctrl-kp-plus) have been implemented.
 * New mouse-related actions: move-to-mouse-position, move-mouse-wheel-up
   and move-mouse-wheel-down.

4.99.6
------

This is an EXPERIMENTAL version for evaluation purposes only. There are
many things that aren't implemented, others fail miserably and many more
do it incorrectly. Basically, what is known to work is:

 * Basic text editing fully works. I've been using it for six months or so
   to maintain itself, and there has not been a crash in three months,
   more or less.
 * Scripting works fine (90% of Minimum Profit 5.x itself is implemented
   in MPSL, its internal scripting language).
 * Undo works fine. It's bound to ctrl-z.
 * Works cleanly in an UTF-8 environment.

I do development on the GTK version, so it's where it works best. The
curses version lacks many of the interface (alerts, confirmations,
asking for text, etc.), so it's barely usable. The win32 version seem
to work, but it needs to be manually installed and probably need some
tweaking.

What it doesn't work:

 * The dialogs to open or save a file by its name aren't implemented.
   There are workarounds for this: files can be opened from the command
   line and save works correctly if the edited file has a name. Also,
   files can be opened by hitting ctrl-f1 (execute script code) and
   typing:

	mp.open("file-to-be-opened");

 * There is no menu.
 * No ispell support.
 * No password protected files.
 * No grep.
 * No external commands (so no support for help, tags, etc.).
 * Some movement commands as moving a word left, moving to matching
   brackets, etc. are still not implemented.
 * Only a few syntax highlight definitions are implemented.
 * Many other things I cannot remember.

Documentation is still scarce: the more interesting bits are inside the
mpsl/doc directory. This is where the scripting language is documented,
with some basic overviews and implementation notes (there is even an
embryo of a PostScript quick reference guide).

Customizing can be done by writing MPSL commands in the ~/.mp.mpsl file,
which is read on startup.

I have not tried to optimize the internal engine, so it's probably some
magnitudes slower than the 3.x version.

